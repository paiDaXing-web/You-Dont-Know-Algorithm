---
title: 01.ä¸åŒçš„å­åºåˆ—
toc: content
---

## 01.ä¸åŒçš„å­åºåˆ—

### æ¥æºï¼š LeetCode ç¬¬ `115` é¢˜

### éš¾åº¦ï¼š ğŸ”¥ğŸ”¥ğŸ”¥ å›°éš¾

### æè¿°ï¼š

ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²`s` å’Œä¸€ä¸ªå­—ç¬¦ä¸²`t` ï¼Œè®¡ç®—åœ¨`s`çš„å­åºåˆ—ä¸­`t` å‡ºç°çš„ä¸ªæ•°ã€‚
å­—ç¬¦ä¸²çš„ä¸€ä¸ªå­åºåˆ—æ˜¯æŒ‡ï¼Œ é€šè¿‡åˆ é™¤ä¸€äº›ï¼ˆ ä¹Ÿå¯ä»¥ä¸åˆ é™¤ï¼‰ å­—ç¬¦ä¸”ä¸å¹²æ‰°å‰©ä½™å­—ç¬¦ç›¸å¯¹ä½ç½®
æ‰€ç»„æˆçš„æ–°å­—ç¬¦ä¸²ã€‚ï¼ˆ ä¾‹å¦‚ï¼Œ " A C E " æ˜¯" A B C D E " çš„ä¸€ä¸ªå­åºåˆ—ï¼Œ è€Œ" A E C " ä¸æ˜¯ï¼‰
é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆç¬¦åˆ `32` ä½å¸¦ç¬¦å·æ•´æ•°èŒƒå›´ã€‚

### ç¤ºä¾‹ 1:

```bash

è¾“å…¥: s = "rabbbit", t = "rabbit"
è¾“å‡º: 3
è§£é‡Š:
å¦‚ä¸‹å›¾æ‰€ç¤º, æœ‰ 3 ç§å¯ä»¥ä» s ä¸­å¾—åˆ°"rabbit"çš„æ–¹æ¡ˆã€‚
`rabb`b`it`
`rab`b`bit`
`ra`b`bbit`
```

### ç¤ºä¾‹ 2:

```bash
è¾“å…¥ï¼š s = " b a b g b a g " , t = " b a g "
è¾“å‡ºï¼š 5
è§£é‡Šï¼š
å¦‚ä¸‹å›¾æ‰€ç¤º, æœ‰5 ç§å¯ä»¥ä»s ä¸­å¾—åˆ°" b a g " çš„æ–¹æ¡ˆã€‚
`ba`b`g`bag
`ba`bgba`g`
`b`abgb`ag`
ba`b`gb`ag`
babg`bag`
```

### æç¤º

```bash
0<=s.length,t.length<=1000

`s` å’Œ `t` ç”±è‹±æ–‡å­—æ¯ç»„æˆ
```

### åŠ¨æ€è§„åˆ’è§£å†³

è¿™é¢˜è¯´çš„æ˜¯`s`çš„å­åºåˆ—ä¸­å‡ºç° t çš„ä¸ªæ•°ï¼Œç¿»è¯‘ä¸€ä¸‹å°±æ˜¯å­—ç¬¦ä¸² s çš„æ‰€æœ‰å­åºåˆ—ä¸­ï¼Œå’Œå­—ç¬¦ä¸² t å®Œå…¨ä¸€æ ·çš„æœ‰å¤šå°‘ä¸ªã€‚
æˆ‘ä»¬å®šä¹‰`dp[i][j]`è¡¨ç¤º t çš„å‰`i`ä¸ªå­—ç¬¦å¯ä»¥ç”±`s`çš„å‰`j`ä¸ªå­—ç¬¦ç»„æˆçš„ä¸ªæ•°ï¼ˆä¹Ÿå¯ä»¥è¯´æ˜¯å­—ç¬¦ä¸²`s`çš„å‰`j`ä¸ªå­—ç¬¦ç»„æˆçš„å­åºåˆ—ä¸­ï¼Œå’Œå­—ç¬¦ä¸²`t`çš„å‰ i ä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²ä¸€æ ·çš„æœ‰å¤šå°‘ä¸ªï¼‰ã€‚
é‚£ä¹ˆæœ€ç»ˆæˆ‘ä»¬åªéœ€è¦æ±‚å‡º`dp[tLength][sLength]`å³å¯ï¼ˆå…¶ä¸­`tLengthå’ŒsLength`åˆ†åˆ«è¡¨ç¤ºå­—ç¬¦ä¸²`t`å’Œ`s`çš„é•¿åº¦ï¼‰ã€‚

![1](../../../assets/algorithm/633.png)

å¦‚ä¸Šå›¾æ‰€ç¤ºæˆ‘ä»¬å¯ä»¥æœ‰ä¸¤ç§é€‰æ‹©ã€‚

å¦‚æœå­—ç¬¦ä¸² `t` çš„ç¬¬ `i` ä¸ªå­—ç¬¦å’Œå­—ç¬¦ä¸² `s` çš„ç¬¬ `j` ä¸ªå­—ç¬¦ä¸ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯è¯´å­—ç¬¦ä¸² `s` çš„ç¬¬ `j` ä¸ªå­—ç¬¦ä¸èƒ½åŒ¹é…å­—ç¬¦ä¸² `t` çš„ç¬¬ `i` ä¸ªå­—ç¬¦ã€‚é‚£ä¹ˆæˆ‘ä»¬åªèƒ½è®¡ç®—å­—ç¬¦ä¸² `s` çš„å‰ `j-1` ä¸ªå­—ç¬¦æ„æˆçš„å­åºåˆ—ä¸­åŒ…å«å­—ç¬¦ä¸² `t` çš„å‰ `i` ä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²çš„ä¸ªæ•°ã€‚

æ‰€ä»¥é€’æ¨å…¬å¼å¦‚ä¸‹

```ts
for (int j = 1; j <= sLength; j++) {
    if (t.charAt(i - 1) == s.charAt(j - 1)) {
        //å¦‚æœå­—ç¬¦ä¸²tçš„ç¬¬iä¸ªå­—ç¬¦å’Œsçš„ç¬¬jä¸ªå­—ç¬¦ä¸€æ ·ï¼Œ
        //é‚£ä¹ˆæœ‰ä¸¤ç§é€‰æ‹©
        dp[i][j] = dp[i - 1][j - 1] + dp[i][j - 1];
    } else {
        //å¦‚æœå­—ç¬¦ä¸²tçš„ç¬¬iä¸ªå­—ç¬¦å’Œsçš„ç¬¬jä¸ªå­—ç¬¦ä¸ä¸€æ ·ï¼Œ
        //æˆ‘ä»¬åªèƒ½ç”¨å­—ç¬¦ä¸²sçš„å‰j-1ä¸ªå­—ç¬¦æ¥è®¡ç®—ä»–åŒ…å«çš„æ•°é‡
        dp[i][j] = dp[i][j - 1];
    }

```

åŠ¨æ€è§„åˆ’çš„ä¸‰ä¸ªæ­¥éª¤å°±æ˜¯`å®šä¹‰çŠ¶æ€`ã€`åˆ—å‡ºé€’æ¨å…¬å¼`,`æ‰¾å‡ºè¾¹ç•Œæ¡ä»¶`ã€‚å‰é¢ä¸¤æ­¥æˆ‘ä»¬éƒ½å®Œæˆäº†ï¼Œæˆ‘ä»¬æ¥çœ‹æœ€åä¸€ä¸ªã€‚å› ä¸ºç©ºå­—ç¬¦ä¸²""æ˜¯æ‰€æœ‰å­—ç¬¦ä¸²çš„å­é›†ï¼Œæ‰€ä»¥å½“å­—ç¬¦ä¸² t ä¸ºç©ºçš„æ—¶å€™ï¼Œdp[0][j]=1;

æˆ‘ä»¬æ¥çœ‹ä¸‹æœ€ç»ˆä»£ç 

```js
public int numDistinct(String s, String t) {
    //sLengthå’ŒtLengthåˆ†åˆ«æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦
    int sLength = s.length();
    int tLength = t.length();
    int[][] dp = new int[tLength + 1][sLength + 1];

    //base case è¾¹ç•Œæ¡ä»¶
    for (int j = 0; j <= sLength; j++) {
        dp[0][j] = 1;
    }

    for (int i = 1; i <= tLength; i++) {
        for (int j = 1; j <= sLength; j++) {
            //ä¸‹é¢æ˜¯é€’æ¨å…¬å¼
            if (t.charAt(i - 1) == s.charAt(j - 1)) {
                //å¦‚æœå­—ç¬¦ä¸²tçš„ç¬¬iä¸ªå­—ç¬¦å’Œsçš„ç¬¬jä¸ªå­—ç¬¦ä¸€æ ·ï¼Œ
                //é‚£ä¹ˆæœ‰ä¸¤ç§é€‰æ‹©
                dp[i][j] = dp[i - 1][j - 1] + dp[i][j - 1];
            } else {
                //å¦‚æœå­—ç¬¦ä¸²tçš„ç¬¬iä¸ªå­—ç¬¦å’Œsçš„ç¬¬jä¸ªå­—ç¬¦ä¸ä¸€æ ·ï¼Œ
                //æˆ‘ä»¬åªèƒ½ç”¨å­—ç¬¦ä¸²sçš„å‰j-1ä¸ªå­—ç¬¦æ¥è®¡ç®—ä»–åŒ…å«çš„æ•°é‡
                dp[i][j] = dp[i][j - 1];
            }
        }
    }
    return dp[tLength][sLength];
}
```

### è¿›é˜¶ä¸ä¼˜åŒ–

#### 1.å¸¸è§„äºŒç»´åŠ¨æ€è§„åˆ’

![](../../../assets/algorithm/1.png)
æœ‰äº†è¾¹ç•Œæ¡ä»¶å’ŒçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åªéœ€è¦æŒ‰åˆ—éå† dp æ•°ç»„å³å¯ï¼Œä»¥ç¤ºä¾‹ 2 ä¸ºä¾‹ï¼Œè¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](../../../assets/algorithm/633.gif)

å¸¸è§„äºŒç»´åŠ¨æ€è§„åˆ’ä»£ç å¦‚ä¸‹ï¼Œç”±äºç”¨ä¾‹æ¯”è¾ƒæç«¯ï¼Œè¿™é‡Œ dp æ•°ç»„å¿…é¡»ç”¨ unsigned long long ç±»å‹ï¼Œå¦åˆ™ä¼šè¶…å‡ºæ•°æ®èŒƒå›´ï¼š
(go)

```go
class Solution {
public:
    int numDistinct(string s, string t) {
        int m = s.size(), n = t.size();
        if(m < n) return 0;
        // dp[i][j]è¡¨ç¤ºåœ¨sçš„å‰iä¸ªå­—ç¬¦ä¸­ï¼Œå¯ä»¥å¾—åˆ°tçš„å‰jä¸ªå­—ç¬¦çš„æ–¹æ¡ˆæ•°
        vector<vector<unsigned long long>> dp(m + 1, vector<unsigned long long>(n + 1));
        // è¾¹ç•Œæ¡ä»¶:dp[i][0] = 1;
        for(int i = 0;i <= m;i++){
            dp[i][0] = 1;
        }
        // æŒ‰åˆ—éå†ï¼Œi < jæ—¶æ–¹æ¡ˆæ•°ä¸€å®šä¸º0ï¼Œå› æ­¤åªéœ€è¦çœ‹äºŒç»´æ•°ç»„å¯¹è§’çº¿ä»¥ä¸‹çš„éƒ¨åˆ†
        for(int j = 1;j <= n;j++){
            for(int i = j; i <= m;i++){
                dp[i][j] = dp[i-1][j];
                if(s[i-1] == t[j-1]){
                    dp[i][j] += dp[i-1][j-1];
                }
            }
        }
        return dp[m][n];
    }
};
```

åˆæ­¥ä¼˜åŒ–
ä»ä¸Šé¢åŠ¨å›¾çš„ç®­å¤´æŒ‡å‘æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ

`dp[i][j]` åªä¸å…¶ä¸Šæ–¹å’Œå·¦ä¸Šæ–¹çš„ç»“æœæœ‰å…³ï¼Œå› æ­¤ï¼Œé™¤äº†çº¢è‰²èƒŒæ™¯çš„éƒ¨åˆ†ï¼Œå¯¹äºä¸‹å›¾ä¸­ç»¿è‰²èƒŒæ™¯çš„éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥ä¸å‚ä¸éå†ï¼š

![](../../../assets/algorithm/2.png)

è¶…å‡ºæ•°æ®èŒƒå›´çš„è¿ç®—å¤§éƒ½å‡ºç°åœ¨ç»¿è‰²éƒ¨åˆ†ï¼Œæˆ‘ä»¬è·³è¿‡äº†ç»¿è‰²éƒ¨åˆ†çš„è¿ç®—ï¼Œä¼˜åŒ–å dp æ•°ç»„åªéœ€è¦å­˜å‚¨ unsigned int ç±»å‹å³å¯ï¼Œæå¤§åœ°èŠ‚çœäº†ç©ºé—´ï¼š

```js
class Solution {
public:
    int numDistinct(string s, string t) {
        int m = s.size(), n = t.size();
        if(m < n) return 0;
        vector<vector<unsigned int>> dp(m + 1, vector<unsigned int>(n + 1));
        for(int i = 0;i <= m;i++){
            dp[i][0] = 1;
        }
        for(int j = 1;j <= n;j++){
            // å‹ç¼©éå†ç©ºé—´
            for(int i = j; i <= m - (n-j);i++){
                dp[i][j] = dp[i-1][j];
                if(s[i-1] == t[j-1]){
                    dp[i][j] += dp[i-1][j-1];
                }
            }
        }
        return dp[m][n];
    }
};


```

#### ä¼˜åŒ–æˆä¸€ç»´æ•°ç»„

ä¸éš¾çœ‹å‡ºï¼Œæ¯ä¸€åˆ—å‚ä¸è¿ç®—éƒ¨åˆ†çš„é•¿åº¦éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼ˆä¸‹å›¾è“è‰²éƒ¨åˆ†ï¼‰æ¥è¡¨ç¤ºè¿™ä¸ªéƒ¨åˆ†å³å¯ï¼š

![](../../../assets/algorithm/1672985237-JJTNEe-Snipaste_2023-01-06_14-06-40.png)

```javascript
class Solution {
public:
    int numDistinct(string s, string t) {
        int m = s.size(), n = t.size();
        if(m < n) return 0;
        int sz = m - n + 1;
        vector<unsigned int> dp(sz, 1);

        for(int j = 1;j <= n;j++){
            // éœ€è¦å€ŸåŠ©å˜é‡preä¿å­˜dpæ•°ç»„çš„å‰ä¸€ä¸ªå€¼
            int pre = 0;
            for(int i = j; i <= m - (n-j);i++){
                if(s[i-1] == t[j-1])
                    dp[i-j] = dp[i-j] + pre;
                else
                    dp[i-j] = pre;
                pre = dp[i-j];
            }
        }
        return dp[sz-1];
    }
};

```

ä¼˜åŒ–åçš„æ—¶é—´å¤æ‚åº¦ï¼šO(mn),ç©ºé—´å¤æ‚åº¦ï¼šO(mâˆ’n)

#### æœ€åé™„ä¸Šå„æ­¥ä¼˜åŒ–çš„è¿è¡Œç»“æœï¼š

- å¸¸è§„è§£æ³•ï¼š
  ![](../../../assets/algorithm/1672985594-onCgev-01.png)
- ç¬¬ä¸€æ­¥ä¼˜åŒ–ï¼š
  ![](../../../assets/algorithm/1672985600-YxoTFI-02.png)
- æœ€ç»ˆä¼˜åŒ–:
  ![](../../../assets/algorithm/1672985608-TDdeVR-03.png)

### ç¤ºä¾‹ä»£ç 

#### javaScript

```js
var numDistinct = function (s, t) {
  let dp = new Array(s.length + 1);
  for (let i = 0; i < dp.length; i++) {
    dp[i] = new Array(t.length + 1).fill(0);
  }

  for (let i = 0; i < dp.length; i++) {
    dp[i][0] = 1;
  }

  for (let i = 1; i < dp.length; i++) {
    for (let j = 1; j < dp[0].length; j++) {
      if (s[i - 1] == t[j - 1]) {
        dp[i][j] += dp[i - 1][j - 1];
      }
      dp[i][j] += dp[i - 1][j];
    }
  }
  return dp[s.length][t.length];
};
```

- java

```js
class Solution {
    public int numDistinct(String s, String t) {
        int[][] dp = new int[s.length() + 1][t.length() + 1];
        for (int i = 0; i < s.length() + 1; i++) {
            dp[i][0] = 1;
        }

        for (int i = 1; i < s.length() + 1; i++) {
            for (int j = 1; j < t.length() + 1; j++) {
                if (s.charAt(i - 1) == t.charAt(j - 1)) {
                    dp[i][j] = dp[i - 1][j - 1] + dp[i - 1][j];
                }else{
                    dp[i][j] = dp[i - 1][j];
                }
            }
        }

        return dp[s.length()][t.length()];
    }
}
```

- python

```python
class Solution:
    def numDistinct(self, s: str, t: str) -> int:
        dp = [[0] * (len(t)+1) for _ in range(len(s)+1)]
        for i in range(len(s)):
            dp[i][0] = 1
        for j in range(1, len(t)):
            dp[0][j] = 0
        for i in range(1, len(s)+1):
            for j in range(1, len(t)+1):
                if s[i-1] == t[j-1]:
                    dp[i][j] = dp[i-1][j-1] + dp[i-1][j]
                else:
                    dp[i][j] = dp[i-1][j]
        return dp[-1][-1]


```

- python3

```python

class SolutionDP2:
    """
    æ—¢ç„¶dp[i]åªç”¨åˆ°dp[i - 1]çš„çŠ¶æ€ï¼Œ
    æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¼“å­˜dp[i - 1]çš„çŠ¶æ€æ¥å¯¹dpè¿›è¡Œå‹ç¼©ï¼Œ
    å‡å°‘ç©ºé—´å¤æ‚åº¦ã€‚
    ï¼ˆåŸç†ç­‰åŒåŒäºæ»šåŠ¨æ•°ç»„ï¼‰
    """

    def numDistinct(self, s: str, t: str) -> int:
        n1, n2 = len(s), len(t)
        if n1 < n2:
            return 0

        dp = [0 for _ in range(n2 + 1)]
        dp[0] = 1

        for i in range(1, n1 + 1):
            # å¿…é¡»æ·±æ‹·è´
            # ä¸ç„¶prev[i]å’Œdp[i]æ˜¯åŒä¸€ä¸ªåœ°å€çš„å¼•ç”¨
            prev = dp.copy()
            # å‰ªæï¼Œä¿è¯sçš„é•¿åº¦å¤§äºç­‰äºt
            # å› ä¸ºå¯¹äºä»»æ„iï¼Œi > n1, dp[i] = 0
            # æ²¡å¿…è¦è·Ÿæ–°çŠ¶æ€ã€‚
            end = i if i < n2 else n2
            for j in range(1, end + 1):
                if s[i - 1] == t[j - 1]:
                    dp[j] = prev[j - 1] + prev[j]
                else:
                    dp[j] = prev[j]
        return dp[-1]


```

- Go

  ```go
  func numDistinct(s string, t string) int {
    dp:= make([][]int,len(s)+1)
    for i:=0;i<len(dp);i++{
        dp[i] = make([]int,len(t)+1)
    }
    // åˆå§‹åŒ–
    for i:=0;i<len(dp);i++{
        dp[i][0] = 1
    }
    // dp[0][j] ä¸º 0ï¼Œé»˜è®¤å€¼ï¼Œå› æ­¤ä¸éœ€è¦åˆå§‹åŒ–
    for i:=1;i<len(dp);i++{
        for j:=1;j<len(dp[i]);j++{
            if s[i-1] == t[j-1]{
                dp[i][j] = dp[i-1][j-1] + dp[i-1][j]
            }else{
                dp[i][j] = dp[i-1][j]
            }
        }
    }
    return dp[len(dp)-1][len(dp[0])-1]
  }


  ```

### è¯•ä¸€è¯•
