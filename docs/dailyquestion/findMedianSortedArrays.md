---
title: 4.å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°
toc: content
tocDepth: 4
---

## é¢˜ç›®

### é¢˜ç›®éš¾åº¦ï¼šğŸ”¥ğŸ”¥ğŸ”¥

ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º `m` å’Œ `n` çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ Â `nums1` å’Œ Â `nums2`ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ ä¸­ä½æ•° ã€‚

ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦åº”è¯¥ä¸º `O(log (m+n))` ã€‚

### ç¤ºä¾‹ 1

```bash
è¾“å…¥ï¼šnums1 = [1,3], nums2 = [2]
è¾“å‡ºï¼š2.00000
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2
```

### ç¤ºä¾‹ 2

```bash
è¾“å…¥ï¼šnums1 = [1,2], nums2 = [3,4]
è¾“å‡ºï¼š2.50000
è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3,4] ï¼Œä¸­ä½æ•° (2 + 3) / 2 = 2.5


```

### æç¤º

- nums1.length == m
- nums2.length == n
- 0 <= m <= 1000
- 0 <= n <= 1000
- 1 <= m + n <= 2000
- -$10^6 <= nums1[i], nums2[i] <= $10^6

## è§£æ³•

### è§£æ³•ä¸€ï¼šæ•°ç»„å½’å¹¶

åœ¨ä¸¤ä¸ªæœ‰åºçš„æ•°ç»„ä¸­è¦æ‰¾åˆ°æŸä¸ªæ•°ï¼Œä¼°è®¡å¤§å®¶ç¬¬ä¸€æƒ³åˆ°çš„å°±æ˜¯å½’å¹¶çš„æ–¹æ³•ã€‚è¿™ä¹Ÿæ˜¯å½’å¹¶æ’åºçš„åŸºæœ¬æ€æƒ³ã€‚å¼€è¾Ÿä¸€ä¸ªæ–°çš„æ•°ç»„ helpï¼Œé•¿åº¦ä¸ºä¸¤ä¸ªæ•°ç»„çš„é•¿åº¦å’Œã€‚ä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆåˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªæ•°ç»„çš„å¼€å¤´ï¼Œæ¯”è¾ƒä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡çš„å…ƒç´ ï¼Œå°†æ¯”è¾ƒå°çš„å…ƒç´ æ”¾å…¥åˆ°æ–°çš„æ•°ç»„ä¸­ã€‚ä¹‹åç»§ç»­ä¸Šè¿°çš„æ“ä½œï¼Œç›´åˆ°å°†æ‰€æœ‰çš„æ•°éƒ½æ”¾å…¥åˆ° help ä¸­ã€‚ä¸¾ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šå°†ä¸¤ä¸ªæœ‰åºæ•°ç»„[1,3,5,6,7]ä¸[2,4,8]åˆå¹¶ä¸ºä¸€ä¸ªæ•°ç»„ï¼š
æœ¬é¢˜æ˜¯è¦æ±‚æ‰¾ä¸­ä½æ•°ï¼Œä¸­ä½æ•°å°±æ˜¯ä¸¤ä¸ªæ•°ç»„é•¿åº¦å’Œçš„ä¸€åŠçš„ä½ç½®ã€‚ä½†æ˜¯è¿™é‡Œè¦æ³¨æ„é•¿åº¦å¥‡æ•°å¶æ•°çš„æƒ…å†µï¼š

- å¦‚æœæ€»é•¿åº¦ä¸ºå¥‡æ•°çš„è¯ï¼Œé‚£ä¹ˆåˆå¹¶åä¸­é—´çš„é‚£ä¸ªæ•°å°±æ˜¯ç»“æœ
- å¦‚æœæ€»é•¿åº¦ä¸ºå¶æ•°çš„è¯ï¼Œé‚£åˆå¹¶åä¸­é—´ä¸¤ä¸ªæ•°çš„å¹³å‡æ•°å°±æ˜¯ç»“æœ
  è¿™é‡Œç”±äºåªéœ€è¦æ‰¾ä¸­ä½æ•°ï¼Œæ‰€ä»¥æ•°ç»„å½’å¹¶åˆ°ä¸­ä½æ•°çš„ä½ç½®å°±å¯ä»¥äº†ï¼Œå¯ä»¥å£°æ˜ä¸€ä¸ªå˜é‡ k ä½œä¸ºè·³å‡ºæ¡ä»¶ã€‚

å½’å¹¶çš„æ–¹æ³•ç®€å•æ˜“æ‡‚ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ç©ºé—´å¤æ‚åº¦å‡ä¸ºçº¿æ€§å¤æ‚åº¦`O(m+n)`ã€‚å¹¶ä¸ç¬¦åˆé¢˜ç›®è¦æ±‚ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯æ¥ä¸‹æ¥æ–¹æ³•çš„å…³é”®ã€‚

- å½’å¹¶

```javascript
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
var findMedianSortedArrays = function (nums1, nums2) {
  let m = nums1.length,
    n = nums2.length,
    cnt = 0;
  let i = 0,
    j = 0,
    mid = (m + n + 1) >> 1;
  // ä½¿ç”¨æ»šåŠ¨æ•°ç»„ï¼Œè®°å½•æœ€è¿‘çš„ä¸¤ä¸ªæ•°å­—ï¼Œç©ºé—´å¤æ‚åº¦ä¸ºO(1)
  let pre, cur;
  // å½’å¹¶æ’åºæ¨¡æ¿
  while (i < m || j < n) {
    if (j == n || (i < m && nums1[i] <= nums2[j])) cur = nums1[i++];
    else cur = nums2[j++];
    cnt++;
    // æ¯æ¬¡å¯ä»¥è·å–åˆ°ä¸€ä¸ªå°æ•°cur
    if ((m + n) & 1) {
      // æ•°å­—ä¸ªæ•°ä¸ºå¥‡æ•°æ—¶ï¼Œä¸­ä½æ•°ä¸ºç¬¬ k/2+1ä¸ª
      // ä¾‹å¦‚ 1 2 3 4 5ï¼Œæœ‰äº”ä¸ªæ•°å­—ï¼Œåˆ™ä¸­ä½æ•°ä¸ºç¬¬3ä¸ª
      if (cnt == mid) return cur;
      // æ•°å­—ä¸ªæ•°ä¸ºå¶æ•°æ—¶ï¼Œä¸­ä½æ•°ä¸ºç¬¬ k/2+1å’Œk/2+2ä¸¤æ•°çš„å¹³å‡æ•°
    } else if (cnt == mid + 1) return (pre + cur) / 2;
    pre = cur;
  }
};
```

- javascript åŒæŒ‡é’ˆ
  å› ä¸ºæ˜¯ä¸¤ä¸ªæ­£åºæ•°ç»„ï¼Œæ‰€ä»¥ä½¿ç”¨åŒæŒ‡é’ˆï¼Œé¡ºåºéå†(m+n)/2 æ¬¡ å³å¯æ‰¾åˆ°ä¸­ä½æ•°ã€‚

```javascript
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
var findMedianSortedArrays = function (nums1, nums2) {
  /**2 åŒæŒ‡é’ˆé¡ºåºæŸ¥æ‰¾ä¸­ä½æ•° */
  let len = nums1.length + nums2.length;
  let loop = Math.ceil(len / 2) - 1; // æ‰¾åˆ°ä¸­ä½æ•°çš„å¾ªç¯æ¬¡æ•°
  let o = (t = 0); // nums1,nums2çš„ç´¢å¼•
  let num1 = (num2 = 0);
  let stopAtOne; // æ ‡å¿—åœ¨å“ªé‡Œåœä¸‹æ¥

  if (len % 2 == 0) {
    loop++; // ä¸¤ä¸ªä¸­ä½æ•°ï¼Œå¤šå¾ªç¯ä¸€æ¬¡
  }

  for (let i = 0; i <= loop; i++) {
    if (nums1[o] <= nums2[t] || t == nums2.length) {
      // num1å€¼å° æˆ– num2æ²¡æœ‰å€¼äº†
      o++;
      stopAtOne = true;
    } else {
      t++;
      stopAtOne = false;
    }
  }
  if (stopAtOne) {
    num1 = nums1[o - 1];
  } else {
    num1 = nums2[t - 1];
  }

  if (len % 2 == 1) return num1;
  else {
    // ä¸¤ä¸ªä¸­ä½æ•°
    if (stopAtOne) {
      // ä»nums1åœï¼Œè¯´æ˜nums1[o-1]æ˜¯å·²éå†ä¸­æœ€å¤§çš„æ•°ï¼Œæ¥ä¸‹æ¥æ‰¾åˆ°ç¬¬äºŒå¤§çš„æ•°å°±å¯ä»¥æ±‚ä¸­ä½æ•°äº†
      num2 =
        o - 2 < 0 || nums1[o - 2] < nums2[t - 1] ? nums2[t - 1] : nums1[o - 2];
    } else {
      // åä¹‹ nums2[t-1]æœ€å¤§
      num2 =
        t - 2 < 0 || nums2[t - 2] < nums1[o - 1] ? nums1[o - 1] : nums2[t - 2];
    }
    return (num1 + num2) / 2;
  }

  /**1 å¤§å®¹å™¨åˆå¹¶ä¸¤ä¸ªæ•°ç»„*/
  // let len = nums1.length + nums2.length;
  // let sum = [];
  // if (nums1.length == 0) {
  //     sum = nums2;
  // } else if (nums2.length == 0) {
  //     sum = nums1;
  // } else {
  //     let i = j = 0;
  //     for (let ii = 0; ii < len; ii++) {
  //         if (nums1[i] < nums2[j] || j==nums2.length) {
  //             sum[ii] = nums1[i]
  //             i++;
  //         } else{
  //             sum[ii] = nums2[j];
  //             j++;
  //         }
  //     }
  // }

  // let index = Math.ceil(len / 2) - 1;
  // if (len % 2 == 1) return sum[index];
  // return (sum[index] + sum[index + 1]) / 2;
};
```

### è§£æ³•äºŒï¼šäºŒåˆ†æŸ¥æ‰¾

å¦‚ä½•è®©æ—¶é—´å¤æ‚åº¦é™ä¸º`O(log(m+n))`å‘¢ï¼Ÿä¸€èˆ¬æ¶‰åŠåˆ° log çš„æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬éƒ½ä¼šæƒ³åˆ°äºŒåˆ†æŸ¥æ‰¾çš„æ–¹æ³•ã€‚å…¶å®è¿™é“é¢˜ä¹Ÿä¸ä¾‹å¤–ã€‚æˆ‘ä»¬ä»”ç»†è§‚å¯Ÿä¸‹é¢çš„ä¾‹å­ï¼š

![](../../assets/daily-question/findMedianSortedArrays-1.png)

é¢˜ç›®è¦æ±‚æ‰¾åˆ°ä¸­ä½æ•°ï¼Œé€šè¿‡è®¡ç®—æˆ‘ä»¬çŸ¥é“ä¸­ä½æ•°åº”å½“æ˜¯ 4,5 ä¸¤ä¸ªæ•°çš„å¹³å‡å€¼ï¼Œå› ä¸ºåˆå¹¶åæ•°ç»„çš„æ€»é•¿ä¸º 8ï¼Œé‚£ä¹ˆä¸­ä½æ•°å°±æ˜¯ä½ç½® 4,5 ä¸¤å¤„çš„æ•°çš„å‡å€¼ã€‚ä¸Šå›¾ä¸­è“è‰²çš„åˆ†å‰²çº¿å°†æ•°ç»„åˆ†ä¸ºäº†ä¸¤éƒ¨åˆ†ï¼Œç°åœ¨æˆ‘ä»¬åªçœ‹å·¦éƒ¨åˆ†ï¼Œå·¦éƒ¨åˆ†ä¸­æ•°ç»„ A è´¡çŒ®äº†ä¸¤ä¸ªæ•°ï¼ˆ2,4ï¼‰ï¼Œæ•°ç»„ B è´¡çŒ®äº†ä¸¤ä¸ªæ•°ï¼ˆ1,3ï¼‰ã€‚ä¸¤ä¸ªæ•°ç»„ä¸€å…±è´¡çŒ®äº† 4 ä¸ªæ•°ã€‚è¿™å››ä¸ªæ•°æ­£å¥½æ˜¯ä¸­ä½æ•°çš„ä½ç½®ã€‚è¿™ä¹Ÿå°±è¯´æ˜äº†`æ•°ç»„ A å’Œæ•°ç»„ B ä¸¤ä¸ªæ•°ç»„è´¡çŒ®çš„å…ƒç´ ä¸ªæ•°çš„å’Œåº”è¯¥ä¸ºæ•°ç»„çš„ä¸€åŠ`ã€‚

![](../../assets/daily-question/findMedianSortedArrays-2.png)

å¦‚å›¾æ‰€ç¤ºï¼Œä¸Šå›¾çš„æƒ…å†µä¸€ä¸æƒ…å†µäºŒéƒ½æ»¡è¶³æ•°ç»„ A å’Œæ•°ç»„ B ä¸¤ä¸ªæ•°ç»„è´¡çŒ®çš„å…ƒç´ ä¸ªæ•°çš„å’Œåº”è¯¥ä¸ºæ•°ç»„çš„ä¸€åŠ`ï¼ˆ3+1ï¼‰ï¼ˆ0+4ï¼‰`ã€‚ä½†æ˜¯éƒ½ä¸ç¬¦åˆè¦æ±‚ï¼š

æƒ…å†µä¸€æ‰€æ„æˆçš„åºåˆ—ä¸ºï¼š`[1,2,4,8]`ï¼Œä½†æ˜¯ä¸­é—´å°‘äº†`3`ï¼Œè€Œå¤šäº†`8`
æƒ…å†µäºŒæ‰€æ„æˆçš„åºåˆ—ä¸ºï¼š`[1,3,5,6]`ï¼Œä¸­é—´å°‘äº†`2,4`,è€Œå¤šäº†`5,6`
å°†ä¸Šè¿°é—®é¢˜æ›´ä¸€èˆ¬åŒ–ä¸ºï¼š

![](../../assets/daily-question/findMedianSortedArrays-3.png)

å¦‚æœä¸æƒ³å‡ºç°ä¸Šè¿°çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯ L1<R1 && L1<R2 L2<R1 && L2 < R2ã€‚ç”±äºé¢˜ç›®ä¸­ç»™çš„æ•°ç»„æ˜¯æœ‰åºçš„ï¼Œæ•… L1 å¿…ç„¶å°äº R1ï¼ŒL2 å¿…ç„¶å°äº R2ã€‚è¿™æ ·æ‰èƒ½æ„æˆä¸€ä¸ªæ­£ç¡®çš„æœ‰åºçš„åºåˆ—ï¼Œè€Œä¸è‡³äºå‡ºç°æƒ…å†µä¸€ä¸æƒ…å†µäºŒçš„é—®é¢˜ã€‚

æ‰€ä»¥æˆ‘ä»¬çš„åºåˆ—å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š

- A è´¡çŒ®çš„å…ƒç´ æ•°é‡ + B è´¡çŒ®çš„å…ƒç´ æ•°é‡ = è¦æ±‚çš„å…ƒç´ æ•°é‡ï¼ˆæœ¬é¢˜æ˜¯æ±‚ä¸­ä½æ•°ï¼Œæ•…è¦æ±‚çš„ä¸ºæ€»æ•°é‡çš„ä¸€åŠï¼‰
  > L1 < R2
  > L2 < R1
  > æ•´ä¸ªé—®é¢˜åŸºæœ¬å°±æ˜¯è¿™ä¸ªæ ·å­ï¼Œæ€è·¯ä¾æ—§æ¥æºäºä¹‹å‰çš„æ–¹æ³•ä¸€ï¼Œåªæ˜¯å°†å…¶ç»†åŒ–è¿›è€Œè½¬æ¢æ€ç»´æ–¹å¼ã€‚æ‰€ä»¥è§£ä»»ä½•é¢˜ç›®ï¼Œç”šè‡³æ˜¯åœ¨ç§‘ç ”å­¦ä¹ å½“ä¸­ï¼Œéƒ½ä¸åº”è¯¥æ”¾å¼ƒæœ€ç®€å•çš„æ–¹æ³•ï¼Œå¯èƒ½æ•ˆç‡å¹¶ä¸æ˜¯ç‰¹åˆ«é«˜ï¼Œä½†æ˜¯å´æä¾›äº†ä¸€ä¸ªèƒ½è®©æˆ‘ä»¬ç»§ç»­æ€è€ƒä¸‹å»çš„å°é˜¶ã€‚

å¦‚ä½•å¿«é€Ÿçš„æ‰¾åˆ° L1 / R1 å’Œ L2/ R2 çš„ä½ç½®
è¿™é‡Œå°±è¦ç”¨åˆ°äºŒåˆ†æŸ¥æ‰¾äº†ã€‚ç”±äº `A è´¡çŒ®çš„å…ƒç´ æ•°é‡ + B è´¡çŒ®çš„å…ƒç´ æ•°é‡ = è¦æ±‚çš„å…ƒç´ æ•°é‡`çš„é™åˆ¶ï¼Œåªè¦æ‰¾åˆ°äº† `L1 / R1` çš„ä½ç½®ï¼Œä¹Ÿå°±æ‰¾åˆ°çš„äº† `L2/ R2` ã€‚ä¸ºäº†ä¹¦å†™æ–¹ä¾¿ï¼Œå°†åœ¨æ•°ç»„ A ä¸­çš„ä½ç½®è¡¨ç¤ºä¸º `curA`,åœ¨æ•°ç»„` B` ä¸­ä½ç½®è¡¨ç¤ºä¸º` curB`ï¼Œï¼ˆæœ¬é¢˜ä¸­ `curA + curB = (A.length + b.length +1)/2)`ã€‚

è¿™æ ·åªéœ€è¦åœ¨ä¸€ä¸ªæ•°ç»„ä¸­è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾äº†ã€‚æˆ‘ä»¬é€‰æ‹©é•¿åº¦æ¯”è¾ƒçŸ­çš„æ•°ç»„ä½œä¸ºæŸ¥æ‰¾æ•°ç»„ï¼š

ç”±äºæ•°åˆ—æ˜¯æœ‰åºçš„ï¼Œå…¶å®æˆ‘ä»¬å®Œå…¨å¯ä»¥ä¸€åŠå„¿ä¸€åŠå„¿çš„æ’é™¤ã€‚å‡è®¾æˆ‘ä»¬è¦æ‰¾ç¬¬ k å°æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ¯æ¬¡å¾ªç¯æ’é™¤æ‰ k/2 ä¸ªæ•°ã€‚çœ‹ä¸‹è¾¹ä¸€ä¸ªä¾‹å­ã€‚

å‡è®¾æˆ‘ä»¬è¦æ‰¾ç¬¬ 7 å°çš„æ•°å­—ã€‚

![](../../assets/daily-question/findMedianSortedArrays-4.png)

æˆ‘ä»¬æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„çš„ç¬¬ k/2 ä¸ªæ•°å­—ï¼Œå¦‚æœ k æ˜¯å¥‡æ•°ï¼Œå‘ä¸‹å–æ•´ã€‚ä¹Ÿå°±æ˜¯æ¯”è¾ƒç¬¬ 3 ä¸ªæ•°å­—ï¼Œä¸Šè¾¹æ•°ç»„ä¸­çš„ 4 å’Œä¸‹è¾¹æ•°ç»„ä¸­çš„
3ï¼Œå¦‚æœå“ªä¸ªå°ï¼Œå°±è¡¨æ˜è¯¥æ•°ç»„çš„å‰ k/2 ä¸ªæ•°å­—éƒ½ä¸æ˜¯ç¬¬ k å°æ•°å­—ï¼Œæ‰€ä»¥å¯ä»¥æ’é™¤ã€‚ä¹Ÿå°±æ˜¯ 1ï¼Œ2ï¼Œ3 è¿™ä¸‰ä¸ªæ•°å­—ä¸å¯èƒ½æ˜¯ç¬¬ 7 å°çš„æ•°å­—ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ’é™¤æ‰ã€‚å°† 1349 å’Œ 45678910 ä¸¤ä¸ªæ•°ç»„ä½œä¸ºæ–°çš„æ•°ç»„è¿›è¡Œæ¯”è¾ƒã€‚

æ›´ä¸€èˆ¬çš„æƒ…å†µ `A[1] ï¼ŒA[2] ï¼ŒA[3]ï¼ŒA[k/2] ... ï¼ŒB[1]ï¼ŒB[2]ï¼ŒB[3]ï¼ŒB[k/2] ... `ï¼Œå¦‚æœ `A[k/2]<B[k/2]` ï¼Œé‚£ä¹ˆ`A[1]ï¼ŒA[2]ï¼ŒA[3]ï¼ŒA[k/2]`éƒ½ä¸å¯èƒ½æ˜¯ç¬¬ `k` å°çš„æ•°å­—ã€‚

A æ•°ç»„ä¸­æ¯” `A[k/2]` å°çš„æ•°æœ‰ `k/2-1 `ä¸ªï¼Œ`B` æ•°ç»„ä¸­ï¼Œ`B[k/2] `æ¯” `A[k/2]` å°ï¼Œå‡è®¾ `B[k/2]` å‰è¾¹çš„æ•°å­—éƒ½æ¯” `A[k/2]` å°ï¼Œä¹Ÿåªæœ‰ `k/2-1` ä¸ªï¼Œæ‰€ä»¥æ¯” `A[k/2]` å°çš„æ•°å­—æœ€å¤šæœ‰ `k/1-1+k/2-1=k-2`ä¸ªï¼Œæ‰€ä»¥ `A[k/2] `æœ€å¤šæ˜¯ç¬¬ `k-1 `å°çš„æ•°ã€‚è€Œæ¯” `A[k/2]` å°çš„æ•°æ›´ä¸å¯èƒ½æ˜¯ç¬¬ k å°çš„æ•°äº†ï¼Œæ‰€ä»¥å¯ä»¥æŠŠå®ƒä»¬æ’é™¤ã€‚
æ©™è‰²çš„éƒ¨åˆ†è¡¨ç¤ºå·²ç»å»æ‰çš„æ•°å­—:

![](../../assets/daily-question/findMedianSortedArrays-5.png)

ç”±äºæˆ‘ä»¬å·²ç»æ’é™¤æ‰äº† 3 ä¸ªæ•°å­—ï¼Œå°±æ˜¯è¿™ 3 ä¸ªæ•°å­—ä¸€å®šåœ¨æœ€å‰è¾¹ï¼Œæ‰€ä»¥åœ¨ä¸¤ä¸ªæ–°æ•°ç»„ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æ‰¾ç¬¬ 7 - 3 = 4 å°çš„æ•°å­—å°±å¯ä»¥äº†ï¼Œä¹Ÿå°±æ˜¯ k = 4ã€‚æ­¤æ—¶ä¸¤ä¸ªæ•°ç»„ï¼Œæ¯”è¾ƒç¬¬ 2 ä¸ªæ•°å­—ï¼Œ3 < 5ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠå°çš„é‚£ä¸ªæ•°ç»„ä¸­çš„ 1 ï¼Œ3 æ’é™¤æ‰äº†

![](../../assets/daily-question/findMedianSortedArrays-6.png)

æˆ‘ä»¬åˆæ’é™¤æ‰ 2 ä¸ªæ•°å­—ï¼Œæ‰€ä»¥ç°åœ¨æ‰¾ç¬¬ 4 - 2 = 2 å°çš„æ•°å­—å°±å¯ä»¥äº†ã€‚æ­¤æ—¶æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„ä¸­çš„ç¬¬ k / 2 = 1 ä¸ªæ•°ï¼Œ4 == 4ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿç”±äºä¸¤ä¸ªæ•°ç›¸ç­‰ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— è®ºå»æ‰å“ªä¸ªæ•°ç»„ä¸­çš„éƒ½è¡Œï¼Œå› ä¸ºå»æ‰ 1 ä¸ªæ€»ä¼šä¿ç•™ 1 ä¸ªçš„ï¼Œæ‰€ä»¥æ²¡æœ‰å½±å“ã€‚ä¸ºäº†ç»Ÿä¸€ï¼Œæˆ‘ä»¬å°±å‡è®¾ 4 > 4 å§ï¼Œæ‰€ä»¥æ­¤æ—¶å°†ä¸‹è¾¹çš„ 4 å»æ‰

![](../../assets/daily-question/findMedianSortedArrays-7.png)

ç”±äºåˆå»æ‰ 1 ä¸ªæ•°å­—ï¼Œæ­¤æ—¶æˆ‘ä»¬è¦æ‰¾ç¬¬ 1 å°çš„æ•°å­—ï¼Œæ‰€ä»¥åªéœ€åˆ¤æ–­ä¸¤ä¸ªæ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæ•°å­—å“ªä¸ªå°å°±å¯ä»¥äº†ï¼Œä¹Ÿå°±æ˜¯ 4ã€‚

æ‰€ä»¥ç¬¬ 7 å°çš„æ•°å­—æ˜¯ 4ã€‚

æˆ‘ä»¬æ¯æ¬¡éƒ½æ˜¯å– k/2 çš„æ•°è¿›è¡Œæ¯”è¾ƒï¼Œæœ‰æ—¶å€™å¯èƒ½ä¼šé‡åˆ°æ•°ç»„é•¿åº¦å°äº k/2 çš„æ—¶å€™ã€‚

![](../../assets/daily-question/findMedianSortedArrays-8.png)

æ­¤æ—¶ k / 2 ç­‰äº 3ï¼Œè€Œä¸Šè¾¹çš„æ•°ç»„é•¿åº¦æ˜¯ 2ï¼Œæˆ‘ä»¬æ­¤æ—¶å°†ç®­å¤´æŒ‡å‘å®ƒçš„æœ«å°¾å°±å¯ä»¥äº†ã€‚è¿™æ ·çš„è¯ï¼Œç”±äº 2 < 3ï¼Œæ‰€ä»¥å°±ä¼šå¯¼è‡´ä¸Šè¾¹çš„æ•°ç»„ 1ï¼Œ2 éƒ½è¢«æ’é™¤ã€‚é€ æˆä¸‹è¾¹çš„æƒ…å†µã€‚

![](../../assets/daily-question/findMedianSortedArrays-9.png)
ç”±äº 2 ä¸ªå…ƒç´ è¢«æ’é™¤ï¼Œæ‰€ä»¥æ­¤æ—¶ k = 5ï¼Œåˆç”±äºä¸Šè¾¹çš„æ•°ç»„å·²ç»ç©ºäº†ï¼Œæˆ‘ä»¬åªéœ€è¦è¿”å›ä¸‹è¾¹çš„æ•°ç»„çš„ç¬¬ 5 ä¸ªæ•°å­—å°±å¯ä»¥äº†ã€‚

ä»ä¸Šè¾¹å¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯æ‰¾ç¬¬å¥‡æ•°ä¸ªè¿˜æ˜¯ç¬¬å¶æ•°ä¸ªæ•°å­—ï¼Œå¯¹æˆ‘ä»¬çš„ç®—æ³•å¹¶æ²¡æœ‰å½±å“ï¼Œè€Œä¸”åœ¨ç®—æ³•è¿›è¡Œä¸­ï¼Œk çš„å€¼éƒ½æœ‰å¯èƒ½ä»å¥‡æ•°å˜ä¸ºå¶æ•°ï¼Œæœ€ç»ˆéƒ½ä¼šå˜ä¸º 1 æˆ–è€…ç”±äºä¸€ä¸ªæ•°ç»„ç©ºäº†ï¼Œç›´æ¥è¿”å›ç»“æœã€‚

æ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨é€’å½’çš„æ€è·¯ï¼Œä¸ºäº†é˜²æ­¢æ•°ç»„é•¿åº¦å°äº k/2ï¼Œæ‰€ä»¥æ¯æ¬¡æ¯”è¾ƒ min(k/2ï¼Œlen(æ•°ç»„) å¯¹åº”çš„æ•°å­—ï¼ŒæŠŠå°çš„é‚£ä¸ªå¯¹åº”çš„æ•°ç»„çš„æ•°å­—æ’é™¤ï¼Œå°†ä¸¤ä¸ªæ–°æ•°ç»„è¿›å…¥é€’å½’ï¼Œå¹¶ä¸” k è¦å‡å»æ’é™¤çš„æ•°å­—çš„ä¸ªæ•°ã€‚é€’å½’å‡ºå£å°±æ˜¯å½“ k=1 æˆ–è€…å…¶ä¸­ä¸€ä¸ªæ•°å­—é•¿åº¦æ˜¯ 0 äº†ã€‚

æ—¶é—´å¤æ‚åº¦ï¼šæ¯è¿›è¡Œä¸€æ¬¡å¾ªç¯ï¼Œæˆ‘ä»¬å°±å‡å°‘ k/2 ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯ O(log(k)ï¼Œè€Œ k=(m+n)/2ï¼Œæ‰€ä»¥æœ€ç»ˆçš„å¤æ‚ä¹Ÿå°±æ˜¯ O(log(m+nï¼‰ã€‚
ç©ºé—´å¤æ‚åº¦ï¼šè™½ç„¶æˆ‘ä»¬ç”¨åˆ°äº†é€’å½’ï¼Œä½†æ˜¯å¯ä»¥çœ‹åˆ°è¿™ä¸ªé€’å½’å±äºå°¾é€’å½’ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨ä¸éœ€è¦ä¸åœåœ°å †æ ˆï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸º O(1)ã€‚

```javascript
/**
 * @param {number[]} nums1
 * @param {number[]} nums2
 * @return {number}
 */
var findMedianSortedArrays = function (nums1, nums2) {
  let m = nums1.length,
    n = nums2.length;
  let mid = (m + n + 1) >> 1;
  let a = findK(0, 0, mid);
  if ((m + n) & 1) return a;
  let b = findK(0, 0, mid + 1);
  function findK(i, j, k) {
    if (i == m) return nums2[j + k - 1];
    if (j == n) return nums1[i + k - 1];
    if (k == 1) return nums1[i] < nums2[j] ? nums1[i] : nums2[j];

    let a = Math.min(k >> 1, m - i);
    let b = Math.min(k - a, n - j);
    a = k - b;
    if (nums1[i + a - 1] <= nums2[j + b - 1]) return findK(i + a, j, k - a);
    return findK(i, j + b, k - b);
  }
  return (a + b) / 2;
};
```

- python 3

  ```javascript

  class Solution:
    def findMedianSortedArrays(self, nums1: List[int], nums2: List[int]) -> float:
        def findKth(i, j, k):
            if i >= m:
                return nums2[j + k - 1]
            if j >= n:
                return nums1[i + k - 1]
            if k == 1:
                return min(nums1[i], nums2[j])
            midVal1 = nums1[i + k // 2 - 1] if i + k // 2 - 1 < m else inf
            midVal2 = nums2[j + k // 2 - 1] if j + k // 2 - 1 < n else inf
            if midVal1 < midVal2:
                return findKth(i + k // 2, j, k - k // 2)
            return findKth(i, j + k // 2, k - k // 2)

        m, n = len(nums1), len(nums2)
        left, right = (m + n + 1) // 2, (m + n + 2) // 2
        return (findKth(0, 0, left) + findKth(0, 0, right)) / 2

  ```

- java

```javascript
class Solution {
    public double findMedianSortedArrays(int[] nums1, int[] nums2) {
        int m = nums1.length;
        int n = nums2.length;
        int left = (m + n + 1) / 2;
        int right = (m + n + 2) / 2;
        return (findKth(nums1, 0, nums2, 0, left) + findKth(nums1, 0, nums2, 0, right)) / 2.0;
    }

    private int findKth(int[] nums1, int i, int[] nums2, int j, int k) {
        if (i >= nums1.length) {
            return nums2[j + k - 1];
        }
        if (j >= nums2.length) {
            return nums1[i + k - 1];
        }
        if (k == 1) {
            return Math.min(nums1[i], nums2[j]);
        }
        int midVal1 = (i + k / 2 - 1 < nums1.length) ? nums1[i + k / 2 - 1] : Integer.MAX_VALUE;
        int midVal2 = (j + k / 2 - 1 < nums2.length) ? nums2[j + k / 2 - 1] : Integer.MAX_VALUE;
        if (midVal1 < midVal2) {
            return findKth(nums1, i + k / 2, nums2, j, k - k / 2);
        }
        return findKth(nums1, i, nums2, j + k / 2, k - k / 2);
    }
}

```

- c++

  ```javascript
  class Solution {
  public:
    double findMedianSortedArrays(vector<int>& nums1, vector<int>& nums2) {
        int m = nums1.size();
        int n = nums2.size();
        int left = (m + n + 1) / 2;
        int right = (m + n + 2) / 2;
        return (findKth(nums1, 0, nums2, 0, left) + findKth(nums1, 0, nums2, 0, right)) / 2.0;
    }

    int findKth(vector<int>& nums1, int i, vector<int>& nums2, int j, int k) {
        if (i >= nums1.size()) return nums2[j + k - 1];
        if (j >= nums2.size()) return nums1[i + k - 1];
        if (k == 1) return min(nums1[i], nums2[j]);
        int midVal1 = i + k / 2 - 1 < nums1.size() ? nums1[i + k / 2 - 1] : INT_MAX;
        int midVal2 = j + k / 2 - 1 < nums2.size() ? nums2[j + k / 2 - 1] : INT_MAX;
        if (midVal1 < midVal2) return findKth(nums1, i + k / 2, nums2, j, k - k / 2);
        return findKth(nums1, i, nums2, j + k / 2, k - k / 2);
    }
  };

  ```

- Go

```javascript
func findMedianSortedArrays(nums1 []int, nums2 []int) float64 {
    m, n := len(nums1), len(nums2)
    left, right := (m+n+1)/2, (m+n+2)/2
    var findKth func(i, j, k int) int
    findKth = func(i, j, k int) int {
        if i >= m {
            return nums2[j+k-1]
        }
        if j >= n {
            return nums1[i+k-1]
        }
        if k == 1 {
            return min(nums1[i], nums2[j])
        }
        midVal1 := math.MaxInt32
        midVal2 := math.MaxInt32
        if i+k/2-1 < m {
            midVal1 = nums1[i+k/2-1]
        }
        if j+k/2-1 < n {
            midVal2 = nums2[j+k/2-1]
        }
        if midVal1 < midVal2 {
            return findKth(i+k/2, j, k-k/2)
        }
        return findKth(i, j+k/2, k-k/2)
    }
    return (float64(findKth(0, 0, left)) + float64(findKth(0, 0, right))) / 2.0
}

func min(a, b int) int {
    if a < b {
        return a
    }
    return b
}

```

### è§£æ³•ä¸‰ï¼šä¼˜åŒ–

æˆ‘ä»¬é¦–å…ˆç†ä¸€ä¸‹ä¸­ä½æ•°çš„å®šä¹‰æ˜¯ä»€ä¹ˆï¼šä¸­ä½æ•°ï¼Œå…¶å¯å°†æ•°å€¼é›†åˆåˆ’åˆ†ä¸ºç›¸ç­‰çš„ä¸Šä¸‹ä¸¤éƒ¨åˆ†ã€‚
æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å°†æ•°ç»„è¿›è¡Œåˆ‡ã€‚

ä¸€ä¸ªé•¿åº¦ä¸º m çš„æ•°ç»„ï¼Œæœ‰ 0 åˆ° m æ€»å…± m + 1 ä¸ªä½ç½®å¯ä»¥åˆ‡

![](../../assets/daily-question/findMedianSortedArrays-10.png)

æˆ‘ä»¬æŠŠæ•°ç»„ A å’Œæ•°ç»„ B åˆ†åˆ«åœ¨ i å’Œ j è¿›è¡Œåˆ‡å‰²

![](../../assets/daily-question/findMedianSortedArrays-11.png)

å°† i çš„å·¦è¾¹å’Œ j çš„å·¦è¾¹ç»„åˆæˆã€Œå·¦åŠéƒ¨åˆ†ã€ï¼Œå°† i çš„å³è¾¹å’Œ j çš„å³è¾¹ç»„åˆæˆã€Œå³åŠéƒ¨åˆ†ã€ã€‚

- å½“ A æ•°ç»„å’Œ B æ•°ç»„çš„æ€»é•¿åº¦æ˜¯å¶æ•°æ—¶ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿä¿è¯

\*å·¦åŠéƒ¨åˆ†çš„é•¿åº¦ç­‰äºå³åŠéƒ¨åˆ†

```bash
i + j = m - i  + n - j  , ä¹Ÿå°±æ˜¯ j = ( m + n ) / 2 - i
```

\*å·¦åŠéƒ¨åˆ†æœ€å¤§çš„å€¼å°äºç­‰äºå³åŠéƒ¨åˆ†æœ€å°çš„å€¼ `max ( A [ i - 1 ] , B [ j - 1 ]ï¼‰ï¼‰ <= min ( A [ i ] , B [ j ]ï¼‰ï¼‰`

```bash
é‚£ä¹ˆï¼Œä¸­ä½æ•°å°±å¯ä»¥è¡¨ç¤ºå¦‚ä¸‹

ï¼ˆå·¦åŠéƒ¨åˆ†æœ€å¤§å€¼ + å³åŠéƒ¨åˆ†æœ€å°å€¼ ï¼‰/ 2ã€‚

ï¼ˆmax ( A [ i - 1 ] , B [  j  - 1 ]ï¼‰+ min ( A [ i ] , B [ j ]ï¼‰ï¼‰ /  2
```

- å½“ A æ•°ç»„å’Œ B æ•°ç»„çš„æ€»é•¿åº¦æ˜¯å¥‡æ•°æ—¶ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿä¿è¯

\*å·¦åŠéƒ¨åˆ†çš„é•¿åº¦æ¯”å³åŠéƒ¨åˆ†å¤§ 1

```bash
i + j = m - i  + n - j  + 1ä¹Ÿå°±æ˜¯ j = ( m + n + 1) / 2 - i
```

\*å·¦åŠéƒ¨åˆ†æœ€å¤§çš„å€¼å°äºç­‰äºå³åŠéƒ¨åˆ†æœ€å°çš„å€¼ max ( A [ i - 1 ] , B [ j - 1 ]ï¼‰ï¼‰ <= min ( A [ i ] , B [ j ]ï¼‰ï¼‰

```bash
é‚£ä¹ˆï¼Œä¸­ä½æ•°å°±æ˜¯

å·¦åŠéƒ¨åˆ†æœ€å¤§å€¼ï¼Œä¹Ÿå°±æ˜¯å·¦åŠéƒ¨æ¯”å³åŠéƒ¨åˆ†å¤šå‡ºçš„é‚£ä¸€ä¸ªæ•°ã€‚

max ( A [ i - 1 ] , B [  j - 1 ]ï¼‰
```

ä¸Šè¾¹çš„ç¬¬ä¸€ä¸ªæ¡ä»¶æˆ‘ä»¬å…¶å®å¯ä»¥åˆå¹¶ä¸º j=(m+n+1)/2âˆ’iï¼Œå› ä¸ºå¦‚æœ m+n æ˜¯å¶æ•°ï¼Œç”±äºæˆ‘ä»¬å–çš„æ˜¯
int å€¼ï¼Œæ‰€ä»¥åŠ  1 ä¹Ÿä¸ä¼šå½±å“ç»“æœã€‚å½“ç„¶ï¼Œç”±äº 0<=i<=m ï¼Œä¸ºäº†ä¿è¯ 0<=j<=nï¼Œæˆ‘ä»¬å¿…é¡»ä¿è¯ m<=nã€‚

```bash

mâ‰¤n,i<m,j=(m+n+1)/2âˆ’iâ‰¥(m+m+1)/2âˆ’i>(m+m+1)/2âˆ’m=0
mâ‰¤n,i>0,j=(m+n+1)/2âˆ’iâ‰¤(n+n+1)/2âˆ’i<(n+n+1)/2=n
```

æœ€åä¸€æ­¥ç”±äºæ˜¯ int é—´çš„è¿ç®—ï¼Œæ‰€ä»¥

1/2=0ã€‚

è€Œå¯¹äºç¬¬äºŒä¸ªæ¡ä»¶ï¼Œå¥‡æ•°å’Œå¶æ•°çš„æƒ…å†µæ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æã€‚ä¸ºäº†ä¿è¯ max ( A [ i - 1 ] , B [ j - 1 ]ï¼‰ï¼‰ <= min ( A [ i ] , B [ j ]ï¼‰ï¼‰ï¼Œå› ä¸º A æ•°ç»„å’Œ B æ•°ç»„æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥ A [ i - 1 ] <= A [ i ]ï¼ŒB [ i - 1 ] <= B [ i ] è¿™æ˜¯å¤©ç„¶çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ä¿è¯ B [ j - 1 ] < = A [ i ] å’Œ A [ i - 1 ] <= B [ j ] æ‰€ä»¥æˆ‘ä»¬åˆ†ä¸¤ç§æƒ…å†µè®¨è®ºï¼š

B [ j - 1 ] > A [ i ]ï¼Œå¹¶ä¸”ä¸ºäº†ä¸è¶Šç•Œï¼Œè¦ä¿è¯ j != 0ï¼Œi != m
![](../../assets/daily-question/findMedianSortedArrays-12.png)
æ­¤æ—¶å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬éœ€è¦å¢åŠ  i ï¼Œä¸ºäº†æ•°é‡çš„å¹³è¡¡è¿˜è¦å‡å°‘ j ï¼Œå¹¸è¿çš„æ˜¯ j = ( m + n + 1) / 2 - iï¼Œi å¢å¤§ï¼Œj è‡ªç„¶ä¼šå‡å°‘ã€‚

A [ i - 1 ] > B [ j ] ï¼Œå¹¶ä¸”ä¸ºäº†ä¸è¶Šç•Œï¼Œè¦ä¿è¯ i != 0ï¼Œj != n

![](../../assets/daily-question/findMedianSortedArrays-13.png)
æ­¤æ—¶å’Œä¸Šè¾¹çš„æƒ…å†µç›¸åï¼Œæˆ‘ä»¬è¦å‡å°‘ i ï¼Œå¢å¤§ j ã€‚

ä¸Šè¾¹ä¸¤ç§æƒ…å†µï¼Œæˆ‘ä»¬æŠŠè¾¹ç•Œéƒ½æ’é™¤äº†ï¼Œéœ€è¦å•ç‹¬è®¨è®ºã€‚

å½“ i = 0, æˆ–è€… j = 0ï¼Œä¹Ÿå°±æ˜¯åˆ‡åœ¨äº†æœ€å‰è¾¹ã€‚

![](../../assets/daily-question/findMedianSortedArrays-14.png)

æ­¤æ—¶å·¦åŠéƒ¨åˆ†å½“ j = 0 æ—¶ï¼Œæœ€å¤§çš„å€¼å°±æ˜¯ A [ i - 1 ] ï¼›å½“ i = 0 æ—¶ æœ€å¤§çš„å€¼å°±æ˜¯ B [ j - 1] ã€‚å³åŠéƒ¨åˆ†æœ€å°å€¼å’Œä¹‹å‰ä¸€æ ·ã€‚

å½“ i = m æˆ–è€… j = nï¼Œä¹Ÿå°±æ˜¯åˆ‡åœ¨äº†æœ€åè¾¹ã€‚

![](../../assets/daily-question/findMedianSortedArrays-14.png)
æ­¤æ—¶å·¦åŠéƒ¨åˆ†æœ€å¤§å€¼å’Œä¹‹å‰ä¸€æ ·ã€‚å³åŠéƒ¨åˆ†å½“ j = n æ—¶ï¼Œæœ€å°å€¼å°±æ˜¯ A [ i ] ï¼›å½“ i = m æ—¶ï¼Œæœ€å°å€¼å°±æ˜¯ B [ j ] ã€‚

æ‰€æœ‰çš„æ€è·¯éƒ½ç†æ¸…äº†ï¼Œæœ€åä¸€ä¸ªé—®é¢˜ï¼Œå¢åŠ  i çš„æ–¹å¼ã€‚å½“ç„¶ç”¨äºŒåˆ†äº†ã€‚åˆå§‹åŒ– i ä¸ºä¸­é—´çš„å€¼ï¼Œç„¶åå‡åŠæ‰¾ä¸­é—´çš„ï¼Œå‡åŠæ‰¾ä¸­é—´çš„ï¼Œå‡åŠæ‰¾ä¸­é—´çš„ç›´åˆ°ç­”æ¡ˆã€‚
